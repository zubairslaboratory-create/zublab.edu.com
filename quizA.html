<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ Ø£ØºÙ†ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Arabic', 'Amiri', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
            min-height: 100vh;
            color: #333;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #1565c0;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #37474f;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Song Player Section */
        .song-section {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .song-title {
            color: #d32f2f;
            font-size: 2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .song-title i {
            color: #ff9800;
        }

        .song-player {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .song-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }

        .song-btn {
            background-color: #1565c0;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5rem;
        }

        .song-btn:hover {
            background-color: #0d47a1;
            transform: scale(1.1);
        }

        .song-btn.play {
            background-color: #4caf50;
        }

        .song-btn.play:hover {
            background-color: #388e3c;
        }

        .lyrics-display {
            background-color: #f5f5f5;
            border-radius: 15px;
            padding: 20px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
            text-align: center;
            font-size: 1.3rem;
            line-height: 2;
            color: #1565c0;
            border: 2px dashed #bbdefb;
        }

        .lyrics-display .current-lyric {
            color: #d32f2f;
            font-weight: bold;
            font-size: 1.5rem;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Alphabet Grid */
        .alphabet-section {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: #1565c0;
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
        }

        .letter-card {
            background: linear-gradient(145deg, #e3f2fd, #bbdefb);
            border-radius: 15px;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .letter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
            border-color: #1565c0;
        }

        .letter-card.active {
            border-color: #4caf50;
            background: linear-gradient(145deg, #c8e6c9, #a5d6a7);
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .letter {
            font-size: 3.5rem;
            font-weight: bold;
            color: #0d47a1;
            margin-bottom: 5px;
        }

        .letter-name {
            font-size: 1.1rem;
            color: #37474f;
            margin-bottom: 5px;
        }

        .letter-sound {
            font-size: 0.9rem;
            color: #546e7a;
            font-style: italic;
        }

        .play-btn {
            margin-top: 10px;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .play-btn:hover {
            background-color: #f57c00;
            transform: scale(1.1);
        }

        /* Quiz Section */
        .quiz-section {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .quiz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
        }

        .quiz-header h2 {
            color: #1565c0;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .quiz-score {
            font-size: 1.3rem;
            color: #d32f2f;
            font-weight: bold;
            margin-bottom: 5px;
            background-color: #ffebee;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
        }

        .quiz-question {
            font-size: 1.8rem;
            color: #0d47a1;
            margin-bottom: 30px;
            text-align: center;
            min-height: 60px;
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .quiz-option {
            padding: 25px;
            background-color: #e3f2fd;
            border: 3px solid #bbdefb;
            border-radius: 15px;
            font-size: 2.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background-color: #bbdefb;
            border-color: #1565c0;
        }

        .quiz-option.correct {
            background-color: #c8e6c9;
            border-color: #4caf50;
            color: #1b5e20;
        }

        .quiz-option.incorrect {
            background-color: #ffcdd2;
            border-color: #f44336;
            color: #b71c1c;
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .quiz-btn {
            padding: 15px 30px;
            background-color: #1565c0;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-btn:hover {
            background-color: #0d47a1;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .quiz-btn:disabled {
            background-color: #90a4ae;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #546e7a;
            font-size: 0.9rem;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .alphabet-grid {
                grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
            }
            
            .letter {
                font-size: 3rem;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .quiz-option {
                font-size: 2.2rem;
                padding: 20px;
            }
            
            .song-title {
                font-size: 1.6rem;
            }
            
            .song-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .lyrics-display {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .alphabet-grid {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
                gap: 10px;
            }
            
            .letter {
                font-size: 2.5rem;
            }
            
            .letter-name {
                font-size: 1rem;
            }
            
            .quiz-question {
                font-size: 1.5rem;
            }
            
            .quiz-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .song-controls {
                flex-wrap: wrap;
            }
        }

        /* Arabic Font */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap');
        
        .arabic-font {
            font-family: 'Amiri', 'Noto Sans Arabic', serif;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="arabic-font">ğŸµ Ù„Ø¹Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ Ø£ØºÙ†ÙŠØ© ğŸµ</h1>
            <p class="arabic-font">ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø© Ù…Ø¹ Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ ÙˆØ§Ø³ØªÙ…Ø¹ Ø¥Ù„Ù‰ Ù†Ø·Ù‚ ÙƒÙ„ Ø­Ø±ÙØŒ ÙˆØ§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø±ÙˆÙ!</p>
        </div>

        <div class="game-container">
            <!-- Song Player Section -->
            <div class="song-section">
                <h2 class="song-title arabic-font">
                    <i class="fas fa-music"></i> Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                </h2>
                <div class="song-player">
                    <div class="song-controls">
                        <button class="song-btn play" id="playSongBtn">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="song-btn" id="pauseSongBtn">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="song-btn" id="restartSongBtn">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                    <div class="lyrics-display arabic-font" id="lyricsDisplay">
                        Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ù„Ø¨Ø¯Ø¡ Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                    </div>
                </div>
            </div>

            <!-- Alphabet Learning Section -->
            <div class="alphabet-section">
                <h2 class="section-title arabic-font">
                    <i class="fas fa-book-open"></i> ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                </h2>
                <p style="text-align: center; margin-bottom: 20px; color: #37474f;" class="arabic-font">
                    Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø±Ù Ù„Ø³Ù…Ø§Ø¹ Ù†Ø·Ù‚Ù‡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø£ØºÙ†ÙŠØ©
                </p>
                <div class="alphabet-grid" id="alphabetGrid">
                    <!-- Arabic letters will be generated by JavaScript -->
                </div>
            </div>

            <!-- Quiz Section -->
            <div class="quiz-section">
                <h2 class="section-title arabic-font">
                    <i class="fas fa-question-circle"></i> Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ø§Ù„Ø­Ø±ÙˆÙ
                </h2>
                <div class="quiz-container">
                    <div class="quiz-header">
                        <h2 class="arabic-font">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h2>
                        <div class="quiz-score">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span>/<span id="totalQuestions">0</span></div>
                    </div>
                    
                    <div class="quiz-question arabic-font" id="quizQuestion">
                        Ø§Ø³ØªÙ…Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø±Ù ÙˆØ§Ø®ØªØ± Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„ØµØ­ÙŠØ­
                    </div>
                    
                    <div class="quiz-options" id="quizOptions">
                        <!-- Quiz options will be generated by JavaScript -->
                    </div>
                    
                    <div class="quiz-controls">
                        <button class="quiz-btn" id="playQuestionBtn">
                            <i class="fas fa-volume-up"></i> Ø§Ø³Ù…Ø¹ Ø§Ù„Ø­Ø±Ù Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                        </button>
                        <button class="quiz-btn" id="nextQuestionBtn">
                            <i class="fas fa-arrow-left"></i> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p class="arabic-font">Ù„Ø¹Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ØªØ¹Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„ Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ | Â© 2023</p>
        </div>
    </div>

    <!-- Audio Element for Song -->
    <audio id="arabicSong" preload="auto">
        <!-- We'll use JavaScript to play tones for each letter since we can't embed actual song -->
    </audio>

    <script>
        // Arabic alphabet data with proper Arabic names
        const arabicAlphabet = [
            { letter: "Ø£", name: "Ø£Ù„Ù", sound: "Ø£Ù„Ù", pronunciation: "A as in apple" },
            { letter: "Ø¨", name: "Ø¨Ø§Ø¡", sound: "Ø¨Ø§Ø¡", pronunciation: "B as in ball" },
            { letter: "Øª", name: "ØªØ§Ø¡", sound: "ØªØ§Ø¡", pronunciation: "T as in table" },
            { letter: "Ø«", name: "Ø«Ø§Ø¡", sound: "Ø«Ø§Ø¡", pronunciation: "Th as in think" },
            { letter: "Ø¬", name: "Ø¬ÙŠÙ…", sound: "Ø¬ÙŠÙ…", pronunciation: "J as in jump" },
            { letter: "Ø­", name: "Ø­Ø§Ø¡", sound: "Ø­Ø§Ø¡", pronunciation: "H as in heavy" },
            { letter: "Ø®", name: "Ø®Ø§Ø¡", sound: "Ø®Ø§Ø¡", pronunciation: "Kh as in Bach" },
            { letter: "Ø¯", name: "Ø¯Ø§Ù„", sound: "Ø¯Ø§Ù„", pronunciation: "D as in dog" },
            { letter: "Ø°", name: "Ø°Ø§Ù„", sound: "Ø°Ø§Ù„", pronunciation: "Th as in that" },
            { letter: "Ø±", name: "Ø±Ø§Ø¡", sound: "Ø±Ø§Ø¡", pronunciation: "R as in run" },
            { letter: "Ø²", name: "Ø²Ø§ÙŠ", sound: "Ø²Ø§ÙŠ", pronunciation: "Z as in zebra" },
            { letter: "Ø³", name: "Ø³ÙŠÙ†", sound: "Ø³ÙŠÙ†", pronunciation: "S as in sun" },
            { letter: "Ø´", name: "Ø´ÙŠÙ†", sound: "Ø´ÙŠÙ†", pronunciation: "Sh as in ship" },
            { letter: "Øµ", name: "ØµØ§Ø¯", sound: "ØµØ§Ø¯", pronunciation: "S as in saw" },
            { letter: "Ø¶", name: "Ø¶Ø§Ø¯", sound: "Ø¶Ø§Ø¯", pronunciation: "D as in dog (emphatic)" },
            { letter: "Ø·", name: "Ø·Ø§Ø¡", sound: "Ø·Ø§Ø¡", pronunciation: "T as in tall (emphatic)" },
            { letter: "Ø¸", name: "Ø¸Ø§Ø¡", sound: "Ø¸Ø§Ø¡", pronunciation: "Th as in that (emphatic)" },
            { letter: "Ø¹", name: "Ø¹ÙŠÙ†", sound: "Ø¹ÙŠÙ†", pronunciation: "A as in aah" },
            { letter: "Øº", name: "ØºÙŠÙ†", sound: "ØºÙŠÙ†", pronunciation: "Gh as in Parisian R" },
            { letter: "Ù", name: "ÙØ§Ø¡", sound: "ÙØ§Ø¡", pronunciation: "F as in fish" },
            { letter: "Ù‚", name: "Ù‚Ø§Ù", sound: "Ù‚Ø§Ù", pronunciation: "Q as in Quran" },
            { letter: "Ùƒ", name: "ÙƒØ§Ù", sound: "ÙƒØ§Ù", pronunciation: "K as in kite" },
            { letter: "Ù„", name: "Ù„Ø§Ù…", sound: "Ù„Ø§Ù…", pronunciation: "L as in lamp" },
            { letter: "Ù…", name: "Ù…ÙŠÙ…", sound: "Ù…ÙŠÙ…", pronunciation: "M as in moon" },
            { letter: "Ù†", name: "Ù†ÙˆÙ†", sound: "Ù†ÙˆÙ†", pronunciation: "N as in nest" },
            { letter: "Ù‡", name: "Ù‡Ø§Ø¡", sound: "Ù‡Ø§Ø¡", pronunciation: "H as in house" },
            { letter: "Ùˆ", name: "ÙˆØ§Ùˆ", sound: "ÙˆØ§Ùˆ", pronunciation: "W as in water" },
            { letter: "ÙŠ", name: "ÙŠØ§Ø¡", sound: "ÙŠØ§Ø¡", pronunciation: "Y as in yellow" }
        ];

        // Arabic alphabet song lyrics
        const arabicSongLyrics = [
            "Ø£Ù„ÙØŒ Ø¨Ø§Ø¡ØŒ ØªØ§Ø¡ØŒ Ø«Ø§Ø¡",
            "Ø¬ÙŠÙ…ØŒ Ø­Ø§Ø¡ØŒ Ø®Ø§Ø¡",
            "Ø¯Ø§Ù„ØŒ Ø°Ø§Ù„ØŒ Ø±Ø§Ø¡ØŒ Ø²Ø§ÙŠ",
            "Ø³ÙŠÙ†ØŒ Ø´ÙŠÙ†ØŒ ØµØ§Ø¯ØŒ Ø¶Ø§Ø¯",
            "Ø·Ø§Ø¡ØŒ Ø¸Ø§Ø¡ØŒ Ø¹ÙŠÙ†ØŒ ØºÙŠÙ†",
            "ÙØ§Ø¡ØŒ Ù‚Ø§ÙØŒ ÙƒØ§ÙØŒ Ù„Ø§Ù…",
            "Ù…ÙŠÙ…ØŒ Ù†ÙˆÙ†ØŒ Ù‡Ø§Ø¡ØŒ ÙˆØ§Ùˆ",
            "ÙŠØ§Ø¡ØŒ Ù‡ÙŠØ§ Ù†ÙƒØ±Ø±Ù‡Ø§ Ù…Ø¹Ù‹Ø§"
        ];

        // DOM Elements
        const alphabetGrid = document.getElementById('alphabetGrid');
        const playSongBtn = document.getElementById('playSongBtn');
        const pauseSongBtn = document.getElementById('pauseSongBtn');
        const restartSongBtn = document.getElementById('restartSongBtn');
        const lyricsDisplay = document.getElementById('lyricsDisplay');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const playQuestionBtn = document.getElementById('playQuestionBtn');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const scoreElement = document.getElementById('score');
        const totalQuestionsElement = document.getElementById('totalQuestions');

        // Game State
        let isSongPlaying = false;
        let songInterval = null;
        let currentLyricIndex = 0;
        let quizData = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = 8;
        let currentQuestionCorrectAnswer = '';
        let audioContext = null;
        let isQuizActive = false;

        // Initialize the game
        function initGame() {
            renderAlphabetCards();
            setupSongPlayer();
            initQuiz();
            setupEventListeners();
            
            // Initialize audio context for sound effects
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }

        // Render alphabet cards
        function renderAlphabetCards() {
            alphabetGrid.innerHTML = '';
            
            arabicAlphabet.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'letter-card';
                card.dataset.index = index;
                
                card.innerHTML = `
                    <div class="letter arabic-font">${item.letter}</div>
                    <div class="letter-name arabic-font">${item.name}</div>
                    <div class="letter-sound">${item.pronunciation}</div>
                    <button class="play-btn" data-index="${index}">
                        <i class="fas fa-volume-up"></i>
                    </button>
                `;
                
                alphabetGrid.appendChild(card);
            });
        }

        // Set up song player
        function setupSongPlayer() {
            playSongBtn.addEventListener('click', playSong);
            pauseSongBtn.addEventListener('click', pauseSong);
            restartSongBtn.addEventListener('click', restartSong);
        }

        // Play the Arabic alphabet song
        function playSong() {
            if (isSongPlaying) return;
            
            isSongPlaying = true;
            playSongBtn.innerHTML = '<i class="fas fa-play"></i>';
            playSongBtn.classList.remove('play');
            
            // Show first lyric
            currentLyricIndex = 0;
            updateLyricsDisplay();
            
            // Start the song simulation
            songInterval = setInterval(() => {
                currentLyricIndex++;
                if (currentLyricIndex >= arabicSongLyrics.length) {
                    currentLyricIndex = 0;
                }
                updateLyricsDisplay();
                
                // Highlight the corresponding letters in the current lyric
                highlightLettersInLyric(arabicSongLyrics[currentLyricIndex]);
            }, 3000); // Change lyric every 3 seconds
        }

        // Pause the song
        function pauseSong() {
            if (!isSongPlaying) return;
            
            isSongPlaying = false;
            playSongBtn.innerHTML = '<i class="fas fa-play"></i>';
            playSongBtn.classList.add('play');
            clearInterval(songInterval);
            
            lyricsDisplay.innerHTML = 'Ø§Ù„Ø£ØºÙ†ÙŠØ© Ù…ØªÙˆÙ‚ÙØ©. Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ù„Ù…ÙˆØ§ØµÙ„Ø© Ø§Ù„Ø£ØºÙ†ÙŠØ©.';
            lyricsDisplay.classList.remove('current-lyric');
        }

        // Restart the song
        function restartSong() {
            pauseSong();
            setTimeout(() => {
                playSong();
            }, 300);
        }

        // Update lyrics display
        function updateLyricsDisplay() {
            lyricsDisplay.innerHTML = '';
            
            // Create a span for each lyric line
            arabicSongLyrics.forEach((lyric, index) => {
                const lyricLine = document.createElement('div');
                lyricLine.textContent = lyric;
                
                if (index === currentLyricIndex) {
                    lyricLine.className = 'current-lyric';
                }
                
                lyricsDisplay.appendChild(lyricLine);
            });
            
            // Scroll to current lyric
            lyricsDisplay.scrollTop = currentLyricIndex * 40;
        }

        // Highlight letters mentioned in the current lyric
        function highlightLettersInLyric(lyric) {
            // Remove active class from all cards
            document.querySelectorAll('.letter-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Extract Arabic letters from lyric
            const lettersInLyric = lyric.match(/[\u0600-\u06FF]/g) || [];
            
            // Highlight corresponding letter cards
            lettersInLyric.forEach(letter => {
                const card = document.querySelector(`.letter-card .letter[innerHTML="${letter}"]`);
                if (card) {
                    const letterCard = card.closest('.letter-card');
                    if (letterCard) {
                        letterCard.classList.add('active');
                        
                        // Play sound for this letter
                        const index = parseInt(letterCard.dataset.index);
                        playLetterSound(index);
                    }
                }
            });
        }

        // Play sound for a specific letter
        function playLetterSound(index) {
            if (index >= 0 && index < arabicAlphabet.length) {
                const letter = arabicAlphabet[index];
                
                // Create and play a tone for the letter
                playToneForLetter(index);
                
                // Also speak the letter name using speech synthesis
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(letter.name);
                    utterance.lang = 'ar-SA';
                    utterance.rate = 0.8;
                    speechSynthesis.speak(utterance);
                }
            }
        }

        // Play a tone for a letter (simulating song)
        function playToneForLetter(index) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Different frequency for each letter
            const frequency = 200 + (index * 30);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Initialize quiz
        function initQuiz() {
            // Create quiz data by shuffling the alphabet
            quizData = [...arabicAlphabet].sort(() => Math.random() - 0.5);
        }

        // Start a new quiz
        function startNewQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            totalQuestions = 8;
            
            scoreElement.textContent = score;
            totalQuestionsElement.textContent = totalQuestions;
            
            generateQuizQuestion();
            nextQuestionBtn.disabled = true;
            isQuizActive = true;
        }

        // Generate a quiz question
        function generateQuizQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                showQuizResults();
                return;
            }
            
            const currentLetter = quizData[currentQuestionIndex];
            currentQuestionCorrectAnswer = currentLetter.letter;
            
            quizQuestion.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestionIndex + 1}: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø±Ù "${currentLetter.name}"ØŸ`;
            
            // Generate answer options
            const options = [currentLetter.letter];
            
            // Add 3 random wrong answers
            while (options.length < 4) {
                const randomLetter = arabicAlphabet[Math.floor(Math.random() * arabicAlphabet.length)].letter;
                if (!options.includes(randomLetter)) {
                    options.push(randomLetter);
                }
            }
            
            // Shuffle options
            shuffleArray(options);
            
            // Render options
            renderQuizOptions(options);
            
            // Speak the letter name
            speakLetterName(currentLetter.name);
            
            nextQuestionBtn.disabled = true;
            playQuestionBtn.disabled = false;
        }

        // Render quiz options
        function renderQuizOptions(options) {
            quizOptions.innerHTML = '';
            
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option arabic-font';
                optionElement.textContent = option;
                optionElement.dataset.letter = option;
                
                quizOptions.appendChild(optionElement);
            });
        }

        // Speak letter name
        function speakLetterName(letterName) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(letterName);
                utterance.lang = 'ar-SA';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // Show quiz results
        function showQuizResults() {
            const percentage = (score / totalQuestions) * 100;
            let message = '';
            
            if (percentage >= 90) {
                message = 'Ù…Ù…ØªØ§Ø²! Ø£Ø­Ø³Ù†Øª! ğŸ‰ Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!';
            } else if (percentage >= 70) {
                message = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! ğŸ‘ Ù…Ø¹Ø±ÙØªÙƒ Ø¨Ø§Ù„Ø­Ø±ÙˆÙ Ù…Ù…ØªØ§Ø²Ø©!';
            } else if (percentage >= 50) {
                message = 'Ø¬ÙŠØ¯! ğŸ˜Š ÙˆØ§ØµÙ„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø±ÙØªÙƒ!';
            } else {
                message = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸ’ª Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ø£ØºÙ†ÙŠØ© ÙˆØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø«Ù… Ø­Ø§ÙˆÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
            }
            
            quizQuestion.innerHTML = `
                <h3>Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!</h3>
                <p>Ù†ØªÙŠØ¬ØªÙƒ: <strong>${score}/${totalQuestions}</strong> (${percentage.toFixed(0)}%)</p>
                <p>${message}</p>
            `;
            
            quizOptions.innerHTML = '';
            nextQuestionBtn.disabled = false;
            nextQuestionBtn.innerHTML = '<i class="fas fa-redo"></i> Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
            playQuestionBtn.style.display = 'none';
            isQuizActive = false;
        }

        // Handle answer selection
        function handleAnswerSelection(selectedOption) {
            const allOptions = document.querySelectorAll('.quiz-option');
            allOptions.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            const isCorrect = selectedOption.dataset.letter === currentQuestionCorrectAnswer;
            
            if (isCorrect) {
                selectedOption.classList.add('correct');
                score++;
                scoreElement.textContent = score;
            } else {
                selectedOption.classList.add('incorrect');
                
                allOptions.forEach(option => {
                    if (option.dataset.letter === currentQuestionCorrectAnswer) {
                        option.classList.add('correct');
                    }
                });
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Set up event listeners
        function setupEventListeners() {
            // Letter card clicks
            alphabetGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('play-btn') || e.target.parentElement.classList.contains('play-btn')) {
                    const playBtn = e.target.classList.contains('play-btn') ? e.target : e.target.parentElement;
                    const index = parseInt(playBtn.dataset.index);
                    
                    playLetterSound(index);
                    
                    const card = playBtn.closest('.letter-card');
                    card.classList.add('active');
                    setTimeout(() => {
                        card.classList.remove('active');
                    }, 500);
                }
                
                if (e.target.classList.contains('letter-card') || e.target.classList.contains('letter') || e.target.classList.contains('letter-name')) {
                    const card = e.target.classList.contains('letter-card') ? e.target : e.target.closest('.letter-card');
                    const index = parseInt(card.dataset.index);
                    
                    playLetterSound(index);
                    
                    card.classList.add('active');
                    setTimeout(() => {
                        card.classList.remove('active');
                    }, 500);
                }
            });
            
            // Quiz option clicks
            quizOptions.addEventListener('click', (e) => {
                if (e.target.classList.contains('quiz-option') && isQuizActive) {
                    handleAnswerSelection(e.target);
                }
            });
            
            // Play question sound again
            playQuestionBtn.addEventListener('click', () => {
                if (currentQuestionIndex < totalQuestions && isQuizActive) {
                    const currentLetter = quizData[currentQuestionIndex];
                    speakLetterName(currentLetter.name);
                }
            });
            
            // Next question button
            nextQuestionBtn.addEventListener('click', () => {
                if (!isQuizActive) {
                    // Restart quiz
                    startNewQuiz();
                    nextQuestionBtn.innerHTML = '<i class="fas fa-arrow-left"></i> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ';
                    playQuestionBtn.style.display = 'flex';
                    return;
                }
                
                currentQuestionIndex++;
                generateQuizQuestion();
                
                const allOptions = document.querySelectorAll('.quiz-option');
                allOptions.forEach(option => {
                    option.style.pointerEvents = 'auto';
                    option.classList.remove('correct', 'incorrect');
                });
            });
        }

        // Utility function to shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
        
        // Start the quiz automatically
        setTimeout(() => {
            startNewQuiz();
        }, 1000);
    </script>
</body>
</html>